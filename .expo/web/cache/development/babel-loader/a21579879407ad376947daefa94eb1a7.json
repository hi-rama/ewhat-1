{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _min = _interopRequireDefault(require(\"lodash/min\"));\n\nvar _map = _interopRequireDefault(require(\"lodash/map\"));\n\nvar _invoke = _interopRequireDefault(require(\"lodash/invoke\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _xdate = _interopRequireDefault(require(\"xdate\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _reactNative = require(\"react-native\");\n\nvar _style = _interopRequireDefault(require(\"./style\"));\n\nvar _Packer = _interopRequireDefault(require(\"./Packer\"));\n\nvar _jsxFileName = \"D:\\\\folder\\\\please-attendence\\\\node_modules\\\\react-native-calendars\\\\src\\\\timeline\\\\Timeline.js\";\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nvar LEFT_MARGIN = 60 - 1;\nvar TEXT_LINE_HEIGHT = 17;\n\nfunction range(from, to) {\n  return Array.from(Array(to), function (_, i) {\n    return from + i;\n  });\n}\n\nvar _Dimensions$get = _reactNative.Dimensions.get('window'),\n    dimensionWidth = _Dimensions$get.width;\n\nvar Timeline = function (_Component) {\n  (0, _inherits2.default)(Timeline, _Component);\n\n  var _super = _createSuper(Timeline);\n\n  function Timeline(props) {\n    var _this;\n\n    (0, _classCallCheck2.default)(this, Timeline);\n    _this = _super.call(this, props);\n    _this.scrollView = _react.default.createRef();\n    var _this$props = _this.props,\n        _this$props$start = _this$props.start,\n        start = _this$props$start === void 0 ? 0 : _this$props$start,\n        _this$props$end = _this$props.end,\n        end = _this$props$end === void 0 ? 0 : _this$props$end;\n    _this.calendarHeight = (end - start) * 100;\n    _this.style = (0, _style.default)(props.theme || props.styles, _this.calendarHeight);\n    var width = dimensionWidth - LEFT_MARGIN;\n    var packedEvents = (0, _Packer.default)(props.events, width, start);\n    var initPosition = (0, _min.default)((0, _map.default)(packedEvents, 'top')) - _this.calendarHeight / (end - start);\n    var verifiedInitPosition = initPosition < 0 ? 0 : initPosition;\n    _this.state = {\n      _scrollY: verifiedInitPosition,\n      packedEvents: packedEvents\n    };\n    return _this;\n  }\n\n  (0, _createClass2.default)(Timeline, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var width = dimensionWidth - LEFT_MARGIN;\n      var prevEvents = prevProps.events,\n          _prevProps$start = prevProps.start,\n          prevStart = _prevProps$start === void 0 ? 0 : _prevProps$start;\n      var _this$props2 = this.props,\n          events = _this$props2.events,\n          _this$props2$start = _this$props2.start,\n          start = _this$props2$start === void 0 ? 0 : _this$props2$start;\n\n      if (prevEvents !== events || prevStart !== start) {\n        this.setState({\n          packedEvents: (0, _Packer.default)(events, width, start)\n        });\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.scrollToFirst && this.scrollToFirst();\n    }\n  }, {\n    key: \"scrollToFirst\",\n    value: function scrollToFirst() {\n      var _this2 = this;\n\n      setTimeout(function () {\n        if (_this2.state && _this2.state._scrollY && _this2.scrollView) {\n          var _this2$scrollView, _this2$scrollView$cur;\n\n          (_this2$scrollView = _this2.scrollView) == null ? void 0 : (_this2$scrollView$cur = _this2$scrollView.current) == null ? void 0 : _this2$scrollView$cur.scrollTo({\n            x: 0,\n            y: _this2.state._scrollY,\n            animated: true\n          });\n        }\n      }, 1);\n    }\n  }, {\n    key: \"_renderLines\",\n    value: function _renderLines() {\n      var _this3 = this;\n\n      var _this$props3 = this.props,\n          format24h = _this$props3.format24h,\n          _this$props3$start = _this$props3.start,\n          start = _this$props3$start === void 0 ? 0 : _this$props3$start,\n          _this$props3$end = _this$props3.end,\n          end = _this$props3$end === void 0 ? 24 : _this$props3$end;\n      var offset = this.calendarHeight / (end - start);\n      var EVENT_DIFF = 20;\n      return range(start, end + 1).map(function (i, index) {\n        var timeText;\n\n        if (i === start) {\n          timeText = '';\n        } else if (i < 12) {\n          timeText = !format24h ? i + \" AM\" : i + \":00\";\n        } else if (i === 12) {\n          timeText = !format24h ? i + \" PM\" : i + \":00\";\n        } else if (i === 24) {\n          timeText = !format24h ? '12 AM' : '23:59';\n        } else {\n          timeText = !format24h ? i - 12 + \" PM\" : i + \":00\";\n        }\n\n        return [_react.default.createElement(_reactNative.Text, {\n          key: \"timeLabel\" + i,\n          style: [_this3.style.timeLabel, {\n            top: offset * index - 6\n          }],\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 17\n          }\n        }, timeText), i === start ? null : _react.default.createElement(_reactNative.View, {\n          key: \"line\" + i,\n          style: [_this3.style.line, {\n            top: offset * index,\n            width: dimensionWidth - EVENT_DIFF\n          }],\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 39\n          }\n        }), _react.default.createElement(_reactNative.View, {\n          key: \"lineHalf\" + i,\n          style: [_this3.style.line, {\n            top: offset * (index + 0.5),\n            width: dimensionWidth - EVENT_DIFF\n          }],\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 17\n          }\n        })];\n      });\n    }\n  }, {\n    key: \"_onEventPress\",\n    value: function _onEventPress(event) {\n      if (this.props.eventTapped) {\n        this.props.eventTapped(event);\n      } else {\n        (0, _invoke.default)(this.props, 'onEventPress', event);\n      }\n    }\n  }, {\n    key: \"_renderEvents\",\n    value: function _renderEvents() {\n      var _this4 = this;\n\n      var packedEvents = this.state.packedEvents;\n      var events = packedEvents.map(function (event, i) {\n        var style = {\n          left: event.left,\n          height: event.height,\n          width: event.width,\n          top: event.top,\n          backgroundColor: event.color ? event.color : '#add8e6'\n        };\n        var numberOfLines = Math.floor(event.height / TEXT_LINE_HEIGHT);\n        var formatTime = _this4.props.format24h ? 'HH:mm' : 'hh:mm A';\n        return _react.default.createElement(_reactNative.TouchableOpacity, {\n          activeOpacity: 0.9,\n          onPress: function onPress() {\n            return _this4._onEventPress(_this4.props.events[event.index]);\n          },\n          key: i,\n          style: [_this4.style.event, style],\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 21\n          }\n        }, _this4.props.renderEvent ? _this4.props.renderEvent(event) : _react.default.createElement(_reactNative.View, {\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 72\n          }\n        }, _react.default.createElement(_reactNative.Text, {\n          numberOfLines: 1,\n          style: _this4.style.eventTitle,\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 15\n          }\n        }, event.title || 'Event'), numberOfLines > 1 ? _react.default.createElement(_reactNative.Text, {\n          numberOfLines: numberOfLines - 1,\n          style: [_this4.style.eventSummary],\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 37\n          }\n        }, event.summary || ' ') : null, numberOfLines > 2 ? _react.default.createElement(_reactNative.Text, {\n          style: _this4.style.eventTimes,\n          numberOfLines: 1,\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 37\n          }\n        }, new _xdate.default(event.start).toString(formatTime), \" - \", new _xdate.default(event.end).toString(formatTime)) : null));\n      });\n      return _react.default.createElement(_reactNative.View, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 17\n        }\n      }, _react.default.createElement(_reactNative.View, {\n        style: {\n          marginLeft: LEFT_MARGIN\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 9\n        }\n      }, events));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return _react.default.createElement(_reactNative.ScrollView, {\n        ref: this.scrollView,\n        contentContainerStyle: [this.style.contentStyle, {\n          width: dimensionWidth\n        }],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 17\n        }\n      }, this._renderLines(), this._renderEvents());\n    }\n  }]);\n  return Timeline;\n}(_react.Component);\n\nexports.default = Timeline;\nTimeline.propTypes = {\n  start: _propTypes.default.number,\n  end: _propTypes.default.number,\n  eventTapped: _propTypes.default.func,\n  onEventPress: _propTypes.default.func,\n  format24h: _propTypes.default.bool,\n  events: _propTypes.default.arrayOf(_propTypes.default.shape({\n    start: _propTypes.default.string.isRequired,\n    end: _propTypes.default.string.isRequired,\n    title: _propTypes.default.string.isRequired,\n    summary: _propTypes.default.string.isRequired,\n    color: _propTypes.default.string\n  })).isRequired\n};\nTimeline.defaultProps = {\n  start: 0,\n  end: 24,\n  events: [],\n  format24h: true\n};","map":{"version":3,"sources":["D:/folder/please-attendence/node_modules/react-native-calendars/src/timeline/Timeline.js"],"names":["LEFT_MARGIN","TEXT_LINE_HEIGHT","range","from","to","Array","_","i","Dimensions","get","dimensionWidth","width","Timeline","props","scrollView","React","createRef","start","end","calendarHeight","style","theme","styles","packedEvents","events","initPosition","verifiedInitPosition","state","_scrollY","prevProps","prevEvents","prevStart","setState","scrollToFirst","setTimeout","current","scrollTo","x","y","animated","format24h","offset","EVENT_DIFF","map","index","timeText","timeLabel","top","line","event","eventTapped","left","height","backgroundColor","color","numberOfLines","Math","floor","formatTime","_onEventPress","renderEvent","eventTitle","title","eventSummary","summary","eventTimes","XDate","toString","marginLeft","contentStyle","_renderLines","_renderEvents","Component","propTypes","PropTypes","number","func","onEventPress","bool","arrayOf","shape","string","isRequired","defaultProps"],"mappings":"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","sourcesContent":["// @flow\nimport min from 'lodash/min';\nimport map from 'lodash/map';\nimport invoke from 'lodash/invoke';\nimport PropTypes from 'prop-types';\nimport XDate from 'xdate';\nimport React, { Component } from 'react';\nimport { View, Text, TouchableOpacity, Dimensions, ScrollView } from 'react-native';\nimport styleConstructor from './style';\nimport populateEvents from './Packer';\nconst LEFT_MARGIN = 60 - 1;\nconst TEXT_LINE_HEIGHT = 17;\nfunction range(from, to) {\n    return Array.from(Array(to), (_, i) => from + i);\n}\nconst { width: dimensionWidth } = Dimensions.get('window');\nexport default class Timeline extends Component {\n    static propTypes = {\n        start: PropTypes.number,\n        end: PropTypes.number,\n        eventTapped: PropTypes.func,\n        onEventPress: PropTypes.func,\n        format24h: PropTypes.bool,\n        events: PropTypes.arrayOf(PropTypes.shape({\n            start: PropTypes.string.isRequired,\n            end: PropTypes.string.isRequired,\n            title: PropTypes.string.isRequired,\n            summary: PropTypes.string.isRequired,\n            color: PropTypes.string\n        })).isRequired\n    };\n    static defaultProps = {\n        start: 0,\n        end: 24,\n        events: [],\n        format24h: true\n    };\n    scrollView = React.createRef();\n    style;\n    calendarHeight;\n    constructor(props) {\n        super(props);\n        const { start = 0, end = 0 } = this.props;\n        this.calendarHeight = (end - start) * 100;\n        this.style = styleConstructor(props.theme || props.styles, this.calendarHeight);\n        const width = dimensionWidth - LEFT_MARGIN;\n        const packedEvents = populateEvents(props.events, width, start);\n        const initPosition = min(map(packedEvents, 'top')) - this.calendarHeight / (end - start);\n        const verifiedInitPosition = initPosition < 0 ? 0 : initPosition;\n        this.state = {\n            _scrollY: verifiedInitPosition,\n            packedEvents\n        };\n    }\n    componentDidUpdate(prevProps) {\n        const width = dimensionWidth - LEFT_MARGIN;\n        const { events: prevEvents, start: prevStart = 0 } = prevProps;\n        const { events, start = 0 } = this.props;\n        if (prevEvents !== events || prevStart !== start) {\n            this.setState({\n                packedEvents: populateEvents(events, width, start)\n            });\n        }\n    }\n    componentDidMount() {\n        this.props.scrollToFirst && this.scrollToFirst();\n    }\n    scrollToFirst() {\n        setTimeout(() => {\n            if (this.state && this.state._scrollY && this.scrollView) {\n                this.scrollView?.current?.scrollTo({\n                    x: 0,\n                    y: this.state._scrollY,\n                    animated: true\n                });\n            }\n        }, 1);\n    }\n    _renderLines() {\n        const { format24h, start = 0, end = 24 } = this.props;\n        const offset = this.calendarHeight / (end - start);\n        const EVENT_DIFF = 20;\n        return range(start, end + 1).map((i, index) => {\n            let timeText;\n            if (i === start) {\n                timeText = '';\n            }\n            else if (i < 12) {\n                timeText = !format24h ? `${i} AM` : `${i}:00`;\n            }\n            else if (i === 12) {\n                timeText = !format24h ? `${i} PM` : `${i}:00`;\n            }\n            else if (i === 24) {\n                timeText = !format24h ? '12 AM' : '23:59';\n            }\n            else {\n                timeText = !format24h ? `${i - 12} PM` : `${i}:00`;\n            }\n            return [\n                <Text key={`timeLabel${i}`} style={[this.style.timeLabel, { top: offset * index - 6 }]}>\n          {timeText}\n        </Text>,\n                i === start ? null : (<View key={`line${i}`} style={[this.style.line, { top: offset * index, width: dimensionWidth - EVENT_DIFF }]}/>),\n                <View key={`lineHalf${i}`} style={[this.style.line, { top: offset * (index + 0.5), width: dimensionWidth - EVENT_DIFF }]}/>\n            ];\n        });\n    }\n    _onEventPress(event) {\n        if (this.props.eventTapped) { //TODO: remove after deprecation\n            this.props.eventTapped(event);\n        }\n        else {\n            invoke(this.props, 'onEventPress', event);\n        }\n    }\n    _renderEvents() {\n        const { packedEvents } = this.state;\n        const events = packedEvents.map((event, i) => {\n            const style = {\n                left: event.left,\n                height: event.height,\n                width: event.width,\n                top: event.top,\n                backgroundColor: event.color ? event.color : '#add8e6'\n            };\n            // Fixing the number of lines for the event title makes this calculation easier.\n            // However it would make sense to overflow the title to a new line if needed\n            const numberOfLines = Math.floor(event.height / TEXT_LINE_HEIGHT);\n            const formatTime = this.props.format24h ? 'HH:mm' : 'hh:mm A';\n            return (<TouchableOpacity activeOpacity={0.9} onPress={() => this._onEventPress(this.props.events[event.index])} key={i} style={[this.style.event, style]}>\n          {this.props.renderEvent ? (this.props.renderEvent(event)) : (<View>\n              <Text numberOfLines={1} style={this.style.eventTitle}>\n                {event.title || 'Event'}\n              </Text>\n              {numberOfLines > 1 ? (<Text numberOfLines={numberOfLines - 1} style={[this.style.eventSummary]}>\n                  {event.summary || ' '}\n                </Text>) : null}\n              {numberOfLines > 2 ? (<Text style={this.style.eventTimes} numberOfLines={1}>\n                  {new XDate(event.start).toString(formatTime)} - {new XDate(event.end).toString(formatTime)}\n                </Text>) : null}\n            </View>)}\n        </TouchableOpacity>);\n        });\n        return (<View>\n        <View style={{ marginLeft: LEFT_MARGIN }}>{events}</View>\n      </View>);\n    }\n    render() {\n        return (<ScrollView ref={this.scrollView} contentContainerStyle={[this.style.contentStyle, { width: dimensionWidth }]}>\n        {this._renderLines()}\n        {this._renderEvents()}\n      </ScrollView>);\n    }\n}\n"]},"metadata":{},"sourceType":"script"}